{% extends "base_generic.html" %}

{% block content %}


<div class="col-md-12">

  <div class="panel panel-default panel-table">
    <div class="panel-heading">
      <div class="row">
        <div style="display: flex; justify-content:space-around; align-items: center;" class="col col-xs-12">
          <p>Categoria: <b>{{subcategory.category}}</b></p>
          <p>Productos de la subcategoria <b>{{subcategory.name}}</b></p>
        </div>
        
      </div>
    </div>
    <div class="panel-body" style="height: 80vh !important;">
      <table class="table table-striped table-bordered table-list">
        <thead>
          <tr>
            <th class="hidden-xs">ID</th>
            <th>Producto</th>
            <th>Categoria</th>
            <th>Subcategoria</th>
            <th>alerta</th>
            <th><em class="fa fa-cog"></em></th>
          </tr> 
        </thead>
        <tbody>

          {% for product in subcategory_all_products.object_list %}
          <tr class="">
            <td class="hidden-xs">{{ product.id }}</td>
            <td>{{ product.name }}</td>
            <td>{{ product.category }}</td>
            <td>{{ subcategory.name}}</td>
            <!-- <td>{{ product.alert}}</td> -->
            {% if product.alert == "red_alert" %}
            <td style="color: red">
              !Alerta roja!
              <div style="float:right; width: 20px; height: 20px; background: red;border-radius: 50%;"></div>
            </td>

            {% elif product.alert == "yellow_alert" %}
              <td style="color: background: #FFA100">
                !Alerta amarilla!
                <div style="float:right; width: 20px; height: 20px; background: #FFA100;border-radius: 50%;"></div>
              </td>
              
            {% else %}
            <td>
              !Producto vencido!
               <div style="float:right; width: 20px; height: 20px; background: gray;border-radius: 50%;"></div>
            </td>
            {% endif %}
            <td align="center">
              <a href="{% url 'catalog:product_detalle' product.id %}" class="btn btn-default"><em class="">Ver detalle</em></a>
              <a class="btn btn-default"><em class="fa fa-pencil"></em></a>
              <a class="btn btn-danger"><em class="fa fa-trash"></em></a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      
    </div>
    <div class="panel-footer">
      <div class="row">
        <div class="col col-xs-4">{{subcategory_all_products}}
        </div>
        <div class="col col-xs-8">

          {% if subcategory_all_products.has_other_pages %}
          <ul class="pagination hidden-xs pull-right">
            {% if subcategory_all_products.has_previous %}
            <li><a href="?page={{ subcategory_all_products.previous_page_number }}">&laquo;</a></li>
            {% else %}
            <li class="disabled"><span>&laquo;</span></li>
            {% endif %}

            {% for i in subcategory_all_products.paginator.page_range %}
            {% if subcategory_all_products.number == i %}
            <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
            {% else %}
            <li><a href="?page={{ i }}">{{ i }}</a></li>
            {% endif %}
            {% endfor %}
            {% if subcategory_all_products.has_next %}
            <li><a href="?page={{ subcategory_all_products.next_page_number }}">&raquo;</a></li>
            {% else %}
            <li class="disabled"><span>&raquo;</span></li>
            {% endif %}
          </ul>
          {% endif %}

        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .panel-footer {
     padding: 0px 15px !important; 
}
</style>

{% endblock %}